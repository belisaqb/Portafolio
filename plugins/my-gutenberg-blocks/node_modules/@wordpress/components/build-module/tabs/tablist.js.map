{"version":3,"names":["Ariakit","warning","forwardRef","useEffect","useLayoutEffect","useRef","useState","useTabsContext","TabListWrapper","clsx","jsx","_jsx","useTrackElementOffset","targetElement","onUpdate","indicatorPosition","setIndicatorPosition","left","top","width","height","updateCallbackRef","current","observedElementRef","resizeObserverRef","undefined","updateIndicator","element","Math","max","offsetLeft","offsetTop","parseFloat","getComputedStyle","ResizeObserver","resizeObserver","observe","unobserve","useOnValueUpdate","value","previousValueRef","previousValue","TabList","children","otherProps","ref","context","selectedId","store","item","animationEnabled","setAnimationEnabled","globalThis","SCRIPT_DEBUG","activeId","selectOnMove","setActiveId","onBlur","render","onTransitionEnd","event","pseudoElement","style","className"],"sources":["@wordpress/components/src/tabs/tablist.tsx"],"sourcesContent":["/**\n * External dependencies\n */\n// eslint-disable-next-line no-restricted-imports\nimport * as Ariakit from '@ariakit/react';\n\n/**\n * WordPress dependencies\n */\nimport warning from '@wordpress/warning';\nimport {\n\tforwardRef,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseState,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type { TabListProps } from './types';\nimport { useTabsContext } from './context';\nimport { TabListWrapper } from './styles';\nimport type { WordPressComponentProps } from '../context';\nimport clsx from 'clsx';\n\nfunction useTrackElementOffset(\n\ttargetElement?: HTMLElement | null,\n\tonUpdate?: () => void\n) {\n\tconst [ indicatorPosition, setIndicatorPosition ] = useState( {\n\t\tleft: 0,\n\t\ttop: 0,\n\t\twidth: 0,\n\t\theight: 0,\n\t} );\n\n\t// TODO: replace with useEventCallback or similar when officially available.\n\tconst updateCallbackRef = useRef( onUpdate );\n\tuseLayoutEffect( () => {\n\t\tupdateCallbackRef.current = onUpdate;\n\t} );\n\n\tconst observedElementRef = useRef< HTMLElement >();\n\tconst resizeObserverRef = useRef< ResizeObserver >();\n\tuseEffect( () => {\n\t\tif ( targetElement === observedElementRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tobservedElementRef.current = targetElement ?? undefined;\n\n\t\tfunction updateIndicator( element: HTMLElement ) {\n\t\t\tsetIndicatorPosition( {\n\t\t\t\t// Workaround to prevent unwanted scrollbars, see:\n\t\t\t\t// https://github.com/WordPress/gutenberg/pull/61979\n\t\t\t\tleft: Math.max( element.offsetLeft - 1, 0 ),\n\t\t\t\ttop: Math.max( element.offsetTop - 1, 0 ),\n\t\t\t\twidth: parseFloat( getComputedStyle( element ).width ),\n\t\t\t\theight: parseFloat( getComputedStyle( element ).height ),\n\t\t\t} );\n\t\t\tupdateCallbackRef.current?.();\n\t\t}\n\n\t\t// Set up a ResizeObserver.\n\t\tif ( ! resizeObserverRef.current ) {\n\t\t\tresizeObserverRef.current = new ResizeObserver( () => {\n\t\t\t\tif ( observedElementRef.current ) {\n\t\t\t\t\tupdateIndicator( observedElementRef.current );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\tconst { current: resizeObserver } = resizeObserverRef;\n\n\t\t// Observe new element.\n\t\tif ( targetElement ) {\n\t\t\tupdateIndicator( targetElement );\n\t\t\tresizeObserver.observe( targetElement );\n\t\t}\n\n\t\treturn () => {\n\t\t\t// Unobserve previous element.\n\t\t\tif ( observedElementRef.current ) {\n\t\t\t\tresizeObserver.unobserve( observedElementRef.current );\n\t\t\t}\n\t\t};\n\t}, [ targetElement ] );\n\n\treturn indicatorPosition;\n}\n\ntype ValueUpdateContext< T > = {\n\tpreviousValue: T;\n};\n\nfunction useOnValueUpdate< T >(\n\tvalue: T,\n\tonUpdate: ( context: ValueUpdateContext< T > ) => void\n) {\n\tconst previousValueRef = useRef( value );\n\n\t// TODO: replace with useEventCallback or similar when officially available.\n\tconst updateCallbackRef = useRef( onUpdate );\n\tuseLayoutEffect( () => {\n\t\tupdateCallbackRef.current = onUpdate;\n\t} );\n\n\tuseEffect( () => {\n\t\tif ( previousValueRef.current !== value ) {\n\t\t\tupdateCallbackRef.current( {\n\t\t\t\tpreviousValue: previousValueRef.current,\n\t\t\t} );\n\t\t\tpreviousValueRef.current = value;\n\t\t}\n\t}, [ value ] );\n}\n\nexport const TabList = forwardRef<\n\tHTMLDivElement,\n\tWordPressComponentProps< TabListProps, 'div', false >\n>( function TabList( { children, ...otherProps }, ref ) {\n\tconst context = useTabsContext();\n\n\tconst selectedId = context?.store.useState( 'selectedId' );\n\tconst indicatorPosition = useTrackElementOffset(\n\t\tcontext?.store.item( selectedId )?.element\n\t);\n\n\tconst [ animationEnabled, setAnimationEnabled ] = useState( false );\n\tuseOnValueUpdate(\n\t\tselectedId,\n\t\t( { previousValue } ) => previousValue && setAnimationEnabled( true )\n\t);\n\n\tif ( ! context ) {\n\t\twarning( '`Tabs.TabList` must be wrapped in a `Tabs` component.' );\n\t\treturn null;\n\t}\n\tconst { store } = context;\n\n\tconst { activeId, selectOnMove } = store.useState();\n\tconst { setActiveId } = store;\n\n\tconst onBlur = () => {\n\t\tif ( ! selectOnMove ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// When automatic tab selection is on, make sure that the active tab is up\n\t\t// to date with the selected tab when leaving the tablist. This makes sure\n\t\t// that the selected tab will receive keyboard focus when tabbing back into\n\t\t// the tablist.\n\t\tif ( selectedId !== activeId ) {\n\t\t\tsetActiveId( selectedId );\n\t\t}\n\t};\n\n\treturn (\n\t\t<Ariakit.TabList\n\t\t\tref={ ref }\n\t\t\tstore={ store }\n\t\t\trender={\n\t\t\t\t<TabListWrapper\n\t\t\t\t\tonTransitionEnd={ ( event ) => {\n\t\t\t\t\t\tif ( event.pseudoElement === '::after' ) {\n\t\t\t\t\t\t\tsetAnimationEnabled( false );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t}\n\t\t\tonBlur={ onBlur }\n\t\t\t{ ...otherProps }\n\t\t\tstyle={ {\n\t\t\t\t'--indicator-left': `${ indicatorPosition.left }px`,\n\t\t\t\t'--indicator-top': `${ indicatorPosition.top }px`,\n\t\t\t\t'--indicator-width': `${ indicatorPosition.width }px`,\n\t\t\t\t'--indicator-height': `${ indicatorPosition.height }px`,\n\t\t\t\t...otherProps.style,\n\t\t\t} }\n\t\t\tclassName={ clsx(\n\t\t\t\tanimationEnabled ? 'is-animation-enabled' : '',\n\t\t\t\totherProps.className\n\t\t\t) }\n\t\t>\n\t\t\t{ children }\n\t\t</Ariakit.TabList>\n\t);\n} );\n"],"mappings":"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","ignoreList":[]}